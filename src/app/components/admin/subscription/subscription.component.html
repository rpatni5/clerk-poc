<div class="subscription-wrapper">
    <mat-card *ngFor="let plan of plans" class="subscription-card {{ plan.cssClass }}">
      <mat-card-header>
        <mat-card-title>{{ plan.name }} Plan</mat-card-title>
        <mat-card-subtitle>{{ plan.subtitle }}</mat-card-subtitle>
      </mat-card-header>
      <mat-card-content>
        <ul>
          <li *ngFor="let feature of plan.features">{{ feature }}</li>
        </ul>
        <div class="price">{{ plan.price }}</div>
      </mat-card-content>
      <mat-card-actions>
        <ng-container *ngIf="plan.name !== 'Free'; else freeTemplate">
          <button mat-stroked-button>Upgrade to {{ plan.name }}</button>
        </ng-container>
        <ng-template #freeTemplate>
          <ng-container *ngIf="!plan.isExpired; else expiredBtn">
            <button mat-stroked-button color="accent" class="expire-button">
              Expire on <span class="expire-date">{{ plan.expiryDateFormatted }}</span>
            </button>
          </ng-container>
        </ng-template>
      
        <ng-template #expiredBtn>
          <button mat-stroked-button color="warn" class="expired-button" disabled>
            Expired
          </button>
        </ng-template>
      </mat-card-actions>
    </mat-card>
  </div>
  